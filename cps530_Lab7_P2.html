<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>(Problem 2) CPS 530 Lab 7 by Dante Romita</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>
    <script>
        $.getJSON('https://s9.reliastream.com:2199/rpc/meyima03/streaminfo.get', function(result) {
            songTitle = result.data[0].song;
            imageURL = result.data[0].track.imageurl;
            proxyTuneInURL = result.data[0].proxytuneinurl;
            proxyTuneInURL = proxyTuneInURL.replace("http:", "https:");

            date = result.data[0].date;
            time = result.data[0].time;
            
            title = result.data[0].track.title;
            artist = result.data[0].track.artist;
            album = result.data[0].track.album;
            if (album == "") {
                album = "N/A";
            }
            id = result.data[0].track.id;

            console.log(result.data[0]);
            console.log("Image URL: " + imageURL);

            headElement = `\
            <head> \
                <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"/>\
                <title>(Problem 2) CPS 530 Lab 7 by Dante Romita</title>\
                <link href=\"https:\/\/cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\"\
                    integrity=\"sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3\" crossorigin=\"anonymous\">\
                <style>\
                    body {\
                        margin-left: 1%;\
                        margin-right: 1%\
                        background-color: blue;\
                    }\
                    .center {\
                        display: block;\
                        margin-left: auto;\
                        margin-right: auto;\
                        width: 45%;\
                    }\
                    table, th, td {border: 2px solid white; font-size: 18pt;}\
                </style>\
            `;

            header = "<header>\
            <h1>CPS 530 Lab 7 Problem 2: Song Album Art and Description</h1>\
            <p>Author: Dante Romita\
            <br>Contact: <a href='mailto:dante.romita@ryerson.ca'>dante.romita@ryerson.ca</a></p>\
            <hr>\
            </header>";
            
            document.write(headElement);
            document.write(`<body style='color: white; background: linear-gradient(rgba(0, 0, 0, 0.9),rgba(0, 0, 0, 0.9)), url(${imageURL});'\
                background-position: center; background-repeat: no-repeat; background-size: cover;>`)
            document.write(header);
            document.write(`<h2 style="text-align:center"><b>Now Playing:</b> ${songTitle}</h2><br>`)
            document.write(`<img class="center" style="border: 10px ridge gray;" src="${imageURL}">`)
            document.write(`<video controls class="center" style="height: 60px;"><source src="${proxyTuneInURL}" type="audio/aac"></video><br>`);
            document.write(`<h4 style="text-align:center"><b>Date | Time:</b> ${date} | ${time} (Hawaiian Standard Time)</h4>`)
            document.write(`<h4 style="text-align:center"><b>Title:</b> ${title}</h4>`)
            document.write(`<h4 style="text-align:center"><b>Artist:</b> ${artist}</h4>`)
            document.write(`<h4 style="text-align:center"><b>Album:</b> ${album}</h4>`)
            document.write(`<h4 style="text-align:center"><b>Song ID:</b> ${id}</h4>`)
        });
    </script>
</body>
</html>
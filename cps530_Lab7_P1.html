<!DOCTYPE html>
<html lang="en">
    <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <!-- jQuery -->
    <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.5/dist/html2canvas.min.js"></script>
    
    <title>(Problem 1) CPS 530 Lab 7 by Dante Romita</title>
    <style>
        body {
            margin-left: 1%;
            margin-right: 1%;
        }
    </style>
    <!-- Site Scripts -->
</head>

<body>
    <header>
        <h1>CPS 530 Lab 7 Problem 1: Mr. Potato Head</h1>
        <p>Author: Dante Romita
        <br>Contact: <a href="mailto:dante.romita@ryerson.ca">dante.romita@ryerson.ca</a></p>
        <hr>
    </header>

    <h2>Input:</h2>
    <p>Create Your Mr. Potato Head by dragging the elements around in the areas below. Then, click <b>Take Screenshot</b> and scroll down to view your screenshots.</p>
    <div class="result"></div>
    <button type="button" id="btnDownload" onclick="takeShot()">Take Screenshot</button><br><br>
    <div id="output"></div>
    <div class = "draggableArea" id = "capture" style = "border:rigid 1px;background-color:paleturquoise; width: 1200px; height: 800px">
        <!--Potato--><img src='potato.png'>
        <!--Eyes--><img style="width: 200px; height: auto;" src='cartoon-eyes.png'>
        <!--Mouth--><img style="width: 150px; height: auto;" src='mouth.png'>
        <!--Nose--><img style="width: 80px; height: auto;" src='nose.png'>
        <!--Hat--><img style="width: 300px; height: auto;" src='hat.png'>
        <div></div>
    </div>
    <br>

    <hr>
    <h2>Output:</h2>
    
    <p>Once you click <b>Take Screenshot</b>, an image will appear here. You can then save the image by right-clicking.
        <b>NOTE: The most recent screenshot will always appear at the bottom of the page!</b></p>

    <script>
        //Allows for draggable elements
        $(".draggableArea img").draggable ({
            containment : ".draggableArea"
        });

        function takeShot() {
            let div = document.getElementById('capture');
            /*html2canvas(div).then(
                function (canvas) {
                    document.getElementById('output').appendChild(canvas)
                }
            )*/
            html2canvas(document.querySelector("#capture")).then(canvas => {document.body.appendChild(canvas)});
        }
        /*
        btnDownload = document.querySelector("#btnDownload");
        imgConverted = document.querySelector("#imgConverted");
        canvas = document.querySelector("#draggableArea");

        btnDownload.addEventListener("click", function () {
            // IE/Edge Support (PNG Only)
            if (window.navigator.msSaveBlob) {
                window.navigator.msSaveBlob(canvas.msToBlob(), "Your-Potato-Head.png");
            } else {
                const a = document.createElement("a");
                document.body.appendChild(a);
                a.href = canvas.toDataURL();
                a.download = "Your-Potato-Head.png";
                a.click();
                document.body.removeChild(a);
            }
        });*/
    </script>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>

<!-- IMAGE URLS
    Body: https://lh5.ggpht.com/9UDY3O4wSwlBm-kHHfjKf85Yk5GCt0nckL5ZdMR-nYotAfNjODvR4sZ-scPXG3ABVF65
    Eyes: https://openclipart.org/image/2400px/svg_to_png/194429/cartoon-eyes.png
    Nose: https://clipartmag.com/images/nose-smell-clipart-35.png
    Mouth: http://images4.wikia.nocookie.net/__cb20120813050734/battlefordreamisland/images/thumb/0/09/Wide_Mouth_Open_Smile.png/999px-Wide_Mouth_Open_Smile.png
    Hat: http://www.clipartbest.com/cliparts/9T4/aMM/9T4aMMXTE.png
-->